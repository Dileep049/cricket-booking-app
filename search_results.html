<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Available Grounds</title>
    <style>
        body { background: #0f0f0f; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; padding: 40px; }
        .card { background: #1e1e1e; border-radius: 20px; width: 420px; border: 1px solid #333; overflow: hidden; text-align: center; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .card img { width: 100%; height: 230px; object-fit: cover; }
        .info { padding: 25px; }
        .loc-link { color: #76ba1b; cursor: pointer; font-weight: bold; text-decoration: none; display: inline-block; margin-bottom: 15px; font-size: 15px; }
        .loc-link:hover { text-decoration: underline; }
        .slot-box { background: #111; border-radius: 15px; overflow: hidden; border: 1px solid #222; width: 100%; }
        .slot-row { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #222; }
        .slot-row:last-child { border-bottom: none; }
        .btn-sel { background: #76ba1b; border: none; color: white; padding: 8px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h2 id="head" style="color:#76ba1b; margin-bottom: 30px;"></h2>
    <div id="container"></div>

    <script>
        const city = localStorage.getItem('selectedCity') || 'Hyderabad';
        const date = localStorage.getItem('selectedDate') || '2026-01-30';
        document.getElementById('head').innerText = `Grounds in ${city} (${date})`;

        const groundDatabase = {
            'Hyderabad': [{ name: 'Uppal Stadium', loc: 'Uppal', price: '5000', owner: 'VVS Laxman', phone: '7654321098', img: 'https://images.unsplash.com/photo-1540747913346-19e32dc3e97e' }],
            'Vijayawada': [{ name: 'Indira Gandhi Stadium', loc: 'Labbipet', price: '2500', owner: 'Venkat Rao', phone: '9550844332', img: 'https://images.unsplash.com/photo-1595231712325-9fdec2149024' }],
            'Bangalore': [{ name: 'Chinnaswamy', loc: 'MG Road', price: '5000', owner: 'Ramesh Kumar', phone: '9876543210', img: 'https://images.unsplash.com/photo-1531415074968-036ba1b575da' }]
        };

        const slots = [
            {id:'s1', label:'6AM - 9AM'}, {id:'s2', label:'10AM - 1PM'}, {id:'s3', label:'4PM - 7PM'}
        ];

        const cont = document.getElementById('container');
        (groundDatabase[city] || []).forEach(g => {
            let slotUI = "";
            slots.forEach(s => {
                const key = `${g.name}_${s.id}_${date}`;
                const isBooked = localStorage.getItem(key);
                slotUI += `<div class="slot-row"><span>${s.label}</span>
                    ${isBooked ? '<span style="color:#ff4d4d; font-weight:bold;">Booked</span>' : 
                    `<button class="btn-sel" onclick="goToDetails('${g.name}','${s.id}','${s.label}')">Select</button>`}</div>`;
            });

            cont.innerHTML += `
                <div class="card">
                    <img src="${g.img}">
                    <div class="info">
                        <h2 style="margin:0 0 5px 0;">${g.name}</h2>
                        <div class="loc-link" onclick="window.open('https://www.google.com/maps/search/${g.name}+${g.loc}')">
                            üìç ${g.loc} | <span style="color:#bbb;">‚Çπ${g.price}/hr</span>
                        </div>
                        <div class="slot-box">${slotUI}</div>
                    </div>
                </div>`;
        });

        function goToDetails(name, sid, label) {
            const ground = groundDatabase[city].find(x => x.name === name);
            localStorage.setItem('temp_booking', JSON.stringify({...ground, slotLabel: label, slotId: sid, date: date}));
            window.location.href = 'pages/booking_details.html';
        }
    </script>
</body>
</html>